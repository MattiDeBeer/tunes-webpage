<!-- public/dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

   <!-- Fullscreen Modal for Terms and Conditions -->
   <div id="termsModal" class="terms-modal">
    <div style="z-index: 1001;">
        <h2 id = "alert-title" style="color: white;"></h2>
        <div id="terms-text">
        </div>

        <div style="display: flex; flex-direction: column;">
        <button id="acceptBtn" style="margin-top: 10px; background-color: rgb(255, 0, 0);">Continue</button>
        <button id="declineBtn" style="margin-top: 10px; background-color: rgb(46, 156, 24);">Cancel</button>
        <button id="dismissBtn" style="margin-top: 10px; display: none;">Dismiss</button>
        </div>
    </div>
</div>
   
   <!-- Navigation Bar -->
   <nav class="navbar">
    <div class="logo">
        <a href="/"><img src="/images/tunes-logo.png" alt="Logo"></a>
      </div>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="signup.html">Register</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
    <button class="menu-toggle">&#9776;</button>
  </nav>


  <!-- Parent Container -->
   
   
<div class="dashboard-wrapper">



  <div class="container-wrapper" style="height: auto; overflow: auto;">
      <h1>General</h1>

      <div class="admin-container-flex" style="width: 100%; box-shadow: none; margin: 0; padding: 0;">
      <!-- User Info Column -->
      <div class="dashboard-column user-info">
        <h1>Welcome Admin, <span id="name">Loading...</span></h1>
        <p>Email: <span id="email">Loading...</span></p>
        <p>Organisation: <span id="organisation">Loading...</span></p>
        <p>Signed in: <span id="signedInLabel">Loading...</span></p>
        <p>There are currently <span id="signed-in-users" style="color: rgb(5, 155, 5);"">Loading ...</span> people on the festival site</p>
        <p>There are <span id="total-users">Loading ...</span> Regisered users</p>
        <div style="margin-top: auto">
          <h1>My Festivals</h1>
          <div  id='festivalList'></div>
            <button id="qr-redirect" style="margin-top: 10px;">QR scanner</button>
          <button id="logout", class = logout-button>Logout</button>
        </div>
      </div>

      <!-- Additional Content Column -->
      <div class="dashboard-column extra-content">
        <h2>QR code</h2>
      <img id="qrCodeImg" alt="Your QR Code" style="margin-top: 20px;">
      </div>
    </div>
  </div>

  
    <div class="container-wrapper" style="height: auto; overflow: auto;">
        <h1>Current Issues</h1>

      <div class="admin-column">
        <button id="fetch-all-issues-button" style="margin-bottom: 10px;">Load Issues</button>
        <div class="table-wrapper">
          <table id="issuesTable" style="max-height: 700px;" class="clean-table">
              <thead>
                  <tr>
                      <th>Email</th>
                      <th>Request Type</th>
                      <th>Created At</th>
                      <th>Resolve</th>
                  </tr>
              </thead>
              <tbody>
                  <!-- Issues will be inserted here dynamically -->
              </tbody>
          </table>
        </div>
      </div>


  </div>
  <div class="container-wrapper" style="height: auto; margin: 10;">
    
      <h1>Alerts and Logs</h1>

      <div class="admin-container-flex" style="width: 100%; box-shadow: none; margin: 0; padding: 0;">

      <div class="admin-column">
        
      
          <h2>Current Alert</h2>
          <p id="currentAlert">No alert currently specified</p>
          <h2>Set Alert</h2>
          <input type="text" id="alertSeverity" placeholder=" 'info' 'warning' or 'critical' " style="width: 96%;">
          <textarea id="alertText" class = "message-box" style="height: 200px; width: 99%;" placeholder="Write your alert here ..."></textarea>
          <button id="submitAlert">Submit alert</button>
          <button id="deleteAlert" style="background-color: red; margin-top: 10px;">Remove Current alert</button>
          <p id="alert-message" class = "message"></p>
      

      </div>

      <div class="admin-column">
        <button id="get-site-log" style="margin-bottom: 10px;">Get sign in logs</button>
        <button id="display-signed-in-users" style="margin-bottom: 10px;">Display all signed in users</button>
        <button id="download-signedin" style="margin-bottom: 10px;">Download all signed in users</button>
        <h2>Results</h2>
        <div class="table-wrapper">
            <table class="clean-table" id="siteLogs</table>Table" >
              <thead id ="siteLogsTableHead">
                  <tr>
                      <th>#</th>
                      <th>Sign-In Log</th>
                  </tr>
              </thead>
              <tbody id="siteLogsTableBody">
                  <!-- Logs will be inserted here -->
              </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

    <div class="container-wrapper" style="height: auto; margin: 0;">
      <h1>Users</h1>

      <div class="admin-container-flex" style="width: 100%; box-shadow: none; margin: 0; padding: 0;">
        
        <div class="admin-column">
          <h1>Search users</h1>
          <input type="text" id="searchInput" placeholder="Search users..." />
        </div>

        <div class="admin-column">
          <h1>Search Results</h1>
        <div class="table-wrapper">
        <table class = "clean-table">
          <thead>
            <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Organisation</th>
          <th>Actions</th>
            </tr>
          </thead>
          <tbody id="usersTableBody"></tbody>
        </table>

          </div>
        </div>

      </div>

    </div>


    <div class="container-wrapper" style="height: auto; margin: 10">
      <h1>Server Logs</h1>
      <div class="admin-container-flex" style="width: 100%; box-shadow: none; margin: 0; padding: 0;">
      <div class="admin-column">
      <button id="fetch-recent-logs" style="background-color: red; margin-top: 10px; width: 100%">Get recent server logs</button>
      <button id="download-logs" style="background-color: red; margin-top: 10px; width:100%">Download server logs</button>
      </div>
    </div>
    </div>



</div>

  <script src="admin-dashboard.js"></script>
</body>
</html>
